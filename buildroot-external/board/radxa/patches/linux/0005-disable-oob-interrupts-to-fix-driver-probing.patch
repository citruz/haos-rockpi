From b0407a925f563a458b7fa11514cdaf31ab01bb6a Mon Sep 17 00:00:00 2001
From: Felix Seele <3756270+citruz@users.noreply.github.com>
Date: Thu, 25 May 2023 21:05:31 +0000
Subject: [PATCH] disable oob interrupts to fix driver probing

---
 arch/arm64/boot/dts/rockchip/rk3399-rock-4c-plus.dts | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-rock-4c-plus.dts b/arch/arm64/boot/dts/rockchip/rk3399-rock-4c-plus.dts
index b4638638a137..1170144b414d 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-rock-4c-plus.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-rock-4c-plus.dts
@@ -572,9 +572,13 @@ &sdio0 {
 	brcmf: wifi@1 {
 		compatible = "brcm,bcm4329-fmac";
 		reg = <1>;
-		interrupt-parent = <&gpio0>;
-		interrupts = <RK_PA3 IRQ_TYPE_LEVEL_HIGH>;
-		interrupt-names = "host-wake";
+		/*
+		 * Disable interrupts to fix driver probing
+		 * https://lore.kernel.org/linux-arm-kernel/20180930150927.12076-1-hdegoede@redhat.com/
+		 * interrupt-parent = <&gpio0>;
+		 * interrupts = <RK_PA3 IRQ_TYPE_LEVEL_HIGH>;
+		 * interrupt-names = "host-wake";
+		 */
 		pinctrl-names = "default";
 		pinctrl-0 = <&wifi_host_wake_l>;
 	};
-- 
2.34.1

